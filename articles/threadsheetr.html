<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="threadsheetr">
<title>Weaving Tabular Datasets using ThreadsheetR • threadsheetr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Weaving Tabular Datasets using ThreadsheetR">
<meta property="og:description" content="threadsheetr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">threadsheetr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/threadsheetr.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/jpowerj/threadsheetr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Weaving Tabular Datasets using ThreadsheetR</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jpowerj/threadsheetr/blob/HEAD/vignettes/threadsheetr.Rmd" class="external-link"><code>vignettes/threadsheetr.Rmd</code></a></small>
      <div class="d-none name"><code>threadsheetr.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jpowerj/threadsheetr" class="external-link">threadsheetr</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="the-problem">The Problem<a class="anchor" aria-label="anchor" href="#the-problem"></a>
</h2>
<p>While working on my PhD dissertation (a chapter on Cold War diplomacy
that didn’t make it into the final version…) I found myself trying to
juggle hundreds of different datasets, which I had OCRed into
<code>.csv</code> format, from sources like the US State Department,
CIA, and official Soviet statistical publications. Each source used
different conventions (e.g., names for countries or regions) and
structures (e.g., some with countries on the <span class="math inline">\(x\)</span>-axis and years on the <span class="math inline">\(y\)</span>-axis, others with just three columns:
country, year, value). So, even to get to the stage of being able to
impute missing datapoints, I had to find some way to align these
different formats. That’s task 1 that <code>threadsheetr</code>
automates for us.</p>
<p>Then, a second problem arose: at first, when I only had (say) two
differing estimates for a given country-year pair, I could get away with
just creating a new “master dataset” whose cells represented
manually-computed averages between the two estimates. As the project
progressed, however, I realized this was way above my pay grade: I’d
have 4, 5, sometimes 6 or more estimates for a given quantity, and if I
decided to remove one, or downweight one of the sources as less
trustworthy, or use the median instead of the mean… Every cell in the
master dataset had to be re-calculated. This is when I realized I needed
a way to automate this task, and <code>threadsheetr</code> was born.</p>
<p>In summary, the three main problems that <code>threadsheetr</code>
sets out to solve are:</p>
<ol style="list-style-type: decimal">
<li>Datasets in a range of non-standard formats—wide, long, multiple
headers, etc.: <code>threadsheetr</code> parses them so that different
datapoints from different input files can be compared, aggregated,
imputed, etc.</li>
<li>Datasets with disagree on the same underlying value: Given an
aggregation function and a set of “trust scores”,
<code>threadsheetr</code> automates the process of combining individual
estimates into a single “master dataset” containing the trust-weighted
average of these individual estimates.</li>
<li>Datasets with missing data: While other R packages like
<code>mice</code> provide sophisticated data imputation algorithms which
should be used for more intensive data-concordance tasks,
<code>threadsheetr</code> contains implementations of some simple data
imputation algorithms to allow the generation of “ballpark” estimates of
these missing values (as part of a larger grid of aggregated estimate
values)</li>
</ol>
<p>In addition, <code>threadsheetr</code> interfaces with both GitHub
and Google Sheets to produce interactive color-coded master data grids,
allowing you to visualize the current state of your data
aggregation/imputation: Green cells, for example, represent values for
which all sources are in agreement, while yellow cells represent those
with conflicting values. Crucially, hovering your mouse over these
columns brings up a popover box containing a description of how the
estimate was arrived at: by hovering over these yellow cells, for
example, you can see a listing of each source file used, their
respective trust weights and estimates of the cell’s value.</p>
</div>
<div class="section level2">
<h2 id="the-demo">The Demo<a class="anchor" aria-label="anchor" href="#the-demo"></a>
</h2>
<p>For this demo I’ll walk through the process that I went through, for
the dissertation, to generate an aggregated grid of country <span class="math inline">\(\times\)</span> year Communist Party membership
estimates. The data come from two main sources:</p>
<ol style="list-style-type: decimal">
<li>
<em>Strength of the World Communist Parties</em>: US State
Department publication, issued yearly from 1963 to 1973. When appended
together, we get a <strong>long</strong>-format dataset: each row
represents a (country,year) pair.</li>
<li>
<em>Hoover Yearbook of World Communism</em>: Yearly statistics
compiled by the Hoover Institution, from 1971 to 1990. Each yearbook
provides a “checklist” wherein each row represents a country, so that
when appended together we get a <strong>long</strong>-format dataset:
each row represents a (country,year) pair.</li>
</ol>
<p>Along with two additional miscellaneous sources which provided rich
data for particular years/regions:</p>
<ol start="3" style="list-style-type: decimal">
<li>
<em>Handbook of Statistical Social Science Data</em>: Provides
membership estimates for select years from 1924 to 1968, in wide format
(each row represents a country, each column represents a year)</li>
<li>
<em>Statistical Abstract of Latin America</em>: Provides yearly
membership estimates for Latin American countries from 1947 to 1976, in
wide format (each row represents a country, each column represents a
year)</li>
</ol>
<p>Part of the difficulty, therefore, came from the fact that the first
two datasets were given in <strong>long</strong> format, while the
latter two were in <strong>wide</strong> (grid) format. Thus in the
first step, which I now describe, <code>threadsheetr</code> detects the
format of each input file and transforms it into a standardized
<strong>long</strong> format, as this format (unlike wide format) will
allow us to record multiple estimates for a single (country,year)
pair.</p>
</div>
<div class="section level2">
<h2 id="step-0-specifying-the-structure-of-the-data">Step 0: Specifying the Structure of the Data<a class="anchor" aria-label="anchor" href="#step-0-specifying-the-structure-of-the-data"></a>
</h2>
<p>Before we can run the <code>threadsheetr</code> library functions, we
need to create a <strong>specification file</strong> which will
record</p>
<ol style="list-style-type: decimal">
<li>The <strong>format</strong> for the grid we want to generate:</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>
<code>varname</code>: The name of the variable we want to generate a
grid for</li>
<li>
<code>alt_names</code>: Any alternative names that this variable
might have in various datasets.</li>
<li>
<code>datatype</code>: The data type we’d like the cells in the
generated grid to have (<code>boolean</code>, <code>int</code>,
<code>float</code>, or <code>string</code>)</li>
<li>
<code>rounding</code>: What the algorithm should do when it
encounters the need to round: if <code>error</code>, the algorithm
terminates when the need to round is encountered, if <code>warn</code> a
warning message is printed but the algorithm continues after rounding,
and if <code>ignore</code> the algorithm just performs the rounding and
continues.</li>
<li>
<code>unit_of_obs</code>: The name of the <strong>index</strong>
variable for the panel dataset (for example, the <code>id</code> of a
survey respondent, or the name of a country)</li>
<li>
<code>time_varname</code>: The name of the <strong>time</strong>
variable for the panel dataset (for example, the month of the current
row’s survey, or the year for which a country’s value was
estimated)</li>
<li>
<code>time_start</code>: The first value of
<code>time_varname</code> that we want in the generated grid</li>
<li>
<code>time_end</code>: The last value of <code>time_varname</code>
that we want in the generated grid</li>
</ol>
<ol start="2" style="list-style-type: decimal">
<li>
<strong>Rules</strong> for how to transform various values the
algorithm encounters, to enable the different formats of the input
datasets to be comported. In this case, for each variable we want to
create rules for, we provide:</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>
<code>varname</code>: The name of the index variable</li>
<li>
<code>altnames</code>: Any alternative names that this index
variable might have across the various datasets</li>
<li>
<code>ffill</code>: If <code>TRUE</code>, missing values of this
index variable will be filled with the closest non-missing value above
them. If <code>FALSE</code> (or not provided), these missing values will
be retained</li>
<li>
<code>lowercase</code> If <code>TRUE</code>, values of this index
variable will be lowercased before being combined (helpful for ensuring
that, for example, “Democratic Republic of Congo” and “Democratic
Republic Of Congo” are treated as the same unit)</li>
<li>
<code>rules</code>: The list of rules for this index variable. Each
rule should have the format <code>value1: {operation: value2}</code>.
The two operations available are <code>rename</code> and
<code>addto</code>, so that the following two forms are valid: i.
<code>oldName: {rename: newName}</code> ii.
<code>altname: {addto: name}</code>
</li>
</ol>
<p>This information should be given in <code>yaml</code> format, and
saved in a file with a <code>.yaml</code> extension. So, in the case of
this vignette, our file is named <code>demo.yaml</code> and has the
following contents (where the rule list for <code>country</code> is
shortened for brevity):</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">index_rules</span><span class="kw">:</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">varname</span><span class="kw">:</span><span class="at"> year</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ffill</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">varname</span><span class="kw">:</span><span class="at"> country</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">alt_names</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">'area'</span><span class="kw">]</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">lowercase</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">rules</span><span class="kw">:</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"Abu Dhabi"</span><span class="fu">: {rename</span><span class="kw">:</span><span class="at"> </span><span class="st">"United Arab Emirates"</span><span class="er">}</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"Basutoland"</span><span class="fu">: {rename</span><span class="kw">:</span><span class="at"> </span><span class="st">"Lesotho"</span><span class="er">}</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"Bechuanaland"</span><span class="fu">: {rename</span><span class="kw">:</span><span class="at"> </span><span class="st">"Botswana"</span><span class="er">}</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"British Guiana"</span><span class="fu">: {rename</span><span class="kw">:</span><span class="at"> </span><span class="st">"Guyana"</span><span class="er">}</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"Cameroons"</span><span class="fu">: {addto</span><span class="kw">:</span><span class="at"> </span><span class="st">"Nigeria"</span><span class="er">}</span><span class="co"> # British Cameroon, became part of Nigeria in 1960</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"Cameroun"</span><span class="fu">: {addto</span><span class="kw">:</span><span class="at"> </span><span class="st">"Cameroon"</span><span class="er">}</span><span class="co"> # French Cameroon, became modern-day Cameroon</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="at">      ...</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"Rio Muni"</span><span class="fu">: {addto</span><span class="kw">:</span><span class="at"> </span><span class="st">"Equatorial Guinea"</span><span class="er">}</span><span class="co"> # The non-continental part of Equatorial Guinea</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"South West Africa"</span><span class="fu">: {rename</span><span class="kw">:</span><span class="at"> </span><span class="st">"Namibia"</span><span class="er">}</span><span class="co"> # Independence from SA in 1990</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"Southern Rhodesia"</span><span class="fu">: {rename</span><span class="kw">:</span><span class="at"> </span><span class="st">"Zimbabwe"</span><span class="er">}</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"Tanganyika"</span><span class="fu">: {rename</span><span class="kw">:</span><span class="at"> </span><span class="st">"Tanzania"</span><span class="er">}</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"TOTALS"</span><span class="fu">: {rename</span><span class="kw">:</span><span class="at"> </span><span class="st">"Total"</span><span class="er">}</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"Trucial States"</span><span class="fu">: {rename</span><span class="kw">:</span><span class="at"> </span><span class="st">"United Arab Emirates"</span><span class="er">}</span><span class="co"> # I know it's not 1-to-1 but this makes life a lot easier</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"United Arab Republic"</span><span class="fu">: {rename</span><span class="kw">:</span><span class="at"> </span><span class="st">"Egypt"</span><span class="er">}</span><span class="co"> # Again, I know... but there's literally only 1 single observation where it's actually Egypt+Syria. All the rest just mean Egypt</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"U.S.S.R."</span><span class="fu">: {rename</span><span class="kw">:</span><span class="at"> </span><span class="st">"USSR"</span><span class="er">}</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"Zaire"</span><span class="fu">: {rename</span><span class="kw">:</span><span class="at"> </span><span class="st">"Democratic Republic of the Congo"</span><span class="er">}</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"Zanzibar"</span><span class="fu">: {addto</span><span class="kw">:</span><span class="at"> </span><span class="st">"Tanzania"</span><span class="er">}</span><span class="co"> # Tanganyika and Zanzibar merged to become Tanzania in 1964</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="fu">grid</span><span class="kw">:</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">varname</span><span class="kw">:</span><span class="at"> cp_membership_num</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">alt_names</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">"cp_membership"</span><span class="kw">,</span><span class="at"> </span><span class="st">"num_members"</span><span class="kw">]</span><span class="co"> # Used as the index if varname isn't found</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">datatype</span><span class="kw">:</span><span class="at"> int</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">rounding</span><span class="kw">:</span><span class="at"> warn</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">unit_of_obs</span><span class="kw">:</span><span class="at"> country</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">time_varname</span><span class="kw">:</span><span class="at"> year</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">time_start</span><span class="kw">:</span><span class="at"> </span><span class="dv">1945</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">time_end</span><span class="kw">:</span><span class="at"> </span><span class="dv">1975</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="step-1-parsing-raw-data-files">Step 1: Parsing Raw Data Files<a class="anchor" aria-label="anchor" href="#step-1-parsing-raw-data-files"></a>
</h2>
<p>With this specification file now in place, we place our four
<code>.csv</code> files in a directory named after the variable we want
to estimate (<code>cp_membership_num</code>), and run the
<code>threader_parse_data()</code> function, telling it where our
<code>.csv</code> files are located and where our <code>.yaml</code>
spec file is located:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">parsed_dfs</span> <span class="op">&lt;-</span> <span class="fu">threadsheetr</span><span class="fu">::</span><span class="fu"><a href="../reference/threader_parse.html">threader_parse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'extdata/cp_membership_num'</span>,package<span class="op">=</span><span class="st">'threadsheetr'</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'extdata/'</span>,<span class="st">'demo.yaml'</span>,package<span class="op">=</span><span class="st">'threadsheetr'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="step-2-combining-parsed-files">Step 2: Combining Parsed Files<a class="anchor" aria-label="anchor" href="#step-2-combining-parsed-files"></a>
</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">combined_df</span> <span class="op">&lt;-</span> <span class="fu">threadsheetr</span><span class="fu">::</span><span class="fu"><a href="../reference/threader_combine.html">threader_combine</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'extdata/parsed'</span>,package<span class="op">=</span><span class="st">'threadsheetr'</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'extdata/combined'</span>,package<span class="op">=</span><span class="st">'threadsheetr'</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'extdata/'</span>,<span class="st">'demo.yaml'</span>,package<span class="op">=</span><span class="st">'threadsheetr'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="step-3-aggregating-individual-estimates-into-master-grid">Step 3: Aggregating Individual Estimates into Master Grid<a class="anchor" aria-label="anchor" href="#step-3-aggregating-individual-estimates-into-master-grid"></a>
</h2>
</div>
<div class="section level2">
<h2 id="step-4-viewing-summary-statistics">Step 4: Viewing Summary Statistics<a class="anchor" aria-label="anchor" href="#step-4-viewing-summary-statistics"></a>
</h2>
</div>
<div class="section level2">
<h2 id="step-5-pushing-to-github-and-generating-color-coded-google-sheets">Step 5: Pushing to GitHub and Generating Color-Coded Google
Sheets<a class="anchor" aria-label="anchor" href="#step-5-pushing-to-github-and-generating-color-coded-google-sheets"></a>
</h2>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jeff Jacobs.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
